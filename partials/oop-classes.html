<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/modern-normalize/3.0.1/modern-normalize.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@700&family=Roboto:wght@400;500;600;700&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" />
  <link rel="stylesheet" href="../css/style.css" />
  <title>ООП и классы в JavaScript</title>
</head>

<body>
  <div id="progress-bar"></div>

  <header>
    <div class="container">
      <button id="theme-toggle">Светлая тема</button>
      <h1>JavaScript: Полное руководство для изучения</h1>
      <nav>
        <ul>
          <li><a href="../index.html">Главная</a></li>
          <li><a href="learning_guide.html">Гайд по обучению</a></li>
          <li><a href="basics.html">Основы</a></li>
          <li><a href="arrays.html">Массивы</a></li>
          <li><a href="functions.html">Функции</a></li>
          <li><a href="loops.html">Циклы</a></li>
          <li><a href="objects.html">Объекты</a></li>
          <li><a href="oop-classes.html" class="active">ООП и классы</a></li>
          <li><a href="exercises.html">Упражнения</a></li>
          <li><a href="projects.html">Проекты</a></li>
          <li><a href="resources.html">Ресурсы</a></li>
          <li><a href="dom_summary.html">Памятка по DOM</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="fade-in visible">
      <h2>ООП и классы в JavaScript</h2>
      <p>Этот урок охватывает ключевые концепции объектно-ориентированного программирования (ООП) в JavaScript:
        классы, прототипы, контекст выполнения, наследование и многое другое.</p>
    </section>

    <!-- Раздел 1: Введение в классы -->
    <section class="fade-in visible">
      <h3>Введение в классы</h3>
      <p>Классы в JavaScript — это шаблоны для создания объектов. Они позволяют описать свойства и методы, которые
        будут у объектов, созданных на их основе.</p>
      <div class="code-block">
        <pre><code class="language-javascript">
class User {
  constructor(name, age) {
    this.name = name; // Сохраняем имя
    this.age = age;   // Сохраняем возраст
  }

  sayHello() {
    console.log(`Привет, я ${this.name}, мне ${this.age} лет!`);
  }
}

const mango = new User("Mango", 25); // Создаем экземпляр
mango.sayHello(); // Привет, я Mango, мне 25 лет!
                </code></pre>
        <button class="run-code" data-example="class-intro">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <!-- Раздел 2: Конструктор и объект параметров -->
    <section class="fade-in visible">
      <h3>Конструктор и объект параметров</h3>
      <p>Конструктор класса инициализирует свойства объекта. Паттерн "Объект параметров" позволяет передавать
        данные в виде одного объекта, а не множества аргументов.</p>
      <div class="code-block">
        <pre><code class="language-javascript">
class Car {
  constructor(params) {
    this.brand = params.brand; // Сохраняем марку
    this.model = params.model; // Сохраняем модель
    this.price = params.price; // Сохраняем цену
  }
}

const car1 = new Car({ brand: "Audi", model: "Q3", price: 36000 });
console.log(car1); // { brand: "Audi", model: "Q3", price: 36000 }
                </code></pre>
        <button class="run-code" data-example="constructor-params">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <!-- Раздел 3: Методы класса и прототипы -->
    <section class="fade-in visible">
      <h3>Методы класса и прототипы</h3>
      <p>Методы класса добавляются в прототип, чтобы экономить память. Они доступны всем экземплярам класса.</p>
      <div class="code-block">
        <pre><code class="language-javascript">
class Car {
  constructor(params) {
    this.brand = params.brand;
    this.model = params.model;
    this.price = params.price;
  }

  getPrice() {
    return this.price; // Возвращаем цену
  }

  changePrice(newPrice) {
    this.price = newPrice; // Изменяем цену
  }
}

const car = new Car({ brand: "BMW", model: "X5", price: 58900 });
console.log(car.getPrice()); // 58900
car.changePrice(60000);
console.log(car.getPrice()); // 60000
                </code></pre>
        <button class="run-code" data-example="methods-prototypes">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <!-- Раздел 4: Приватные свойства и методы -->
    <section class="fade-in visible">
      <h3>Приватные свойства и методы</h3>
      <p>Приватные свойства и методы (с #) доступны только внутри класса, что обеспечивает инкапсуляцию данных.
      </p>
      <div class="code-block">
        <pre><code class="language-javascript">
class User {
  name;
  #email;

  constructor(params) {
    this.name = params.name;
    this.#email = params.email;
  }

  getEmail() {
    return this.#email; // Возвращаем приватное свойство
  }

  changeEmail(newEmail) {
    if (this.#validateEmail(newEmail)) { // Используем приватный метод
      this.#email = newEmail;
      console.log("Email изменен на: " + newEmail);
    } else {
      console.log("Неверный формат email!");
    }
  }

  #validateEmail(email) {
    return email.includes('@'); // Проверяем наличие @
  }
}

const mango = new User({ name: "Mango", email: "mango@mail.com" });
mango.changeEmail("new@mail.com"); // Email изменен на: new@mail.com
mango.changeEmail("invalid-email"); // Неверный формат email!
console.log(mango.getEmail()); // new@mail.com
                </code></pre>
        <button class="run-code" data-example="private-props-methods">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <!-- Раздел 5: Геттеры и сеттеры -->
    <section class="fade-in visible">
      <h3>Геттеры и сеттеры</h3>
      <p>Геттеры и сеттеры позволяют контролировать доступ к свойствам, добавляя логику при чтении или изменении
        значений.</p>
      <div class="code-block">
        <pre><code class="language-javascript">
class Car {
  #brand;
  #model;
  #price;

  constructor(params) {
    this.#brand = params.brand;
    this.#model = params.model;
    this.#price = params.price;
  }

  get brand() {
    return this.#brand;
  }

  set brand(newBrand) {
    this.#brand = newBrand;
  }

  get model() {
    return this.#model;
  }

  set model(newModel) {
    this.#model = newModel;
  }

  get price() {
    return this.#price;
  }

  set price(newPrice) {
    if (newPrice <= 0) {
      console.log("Ошибка! Цена должна быть больше 0!");
      return;
    }
    this.#price = newPrice;
  }
}

const car = new Car({ brand: "Audi", model: "Q3", price: 36000 });
console.log(car.price); // 36000
car.price = -5000; // Ошибка! Цена должна быть больше 0!
car.price = 40000;
console.log(car.price); // 40000
                </code></pre>
        <button class="run-code" data-example="getters-setters">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <!-- Раздел 6: Статические свойства и методы -->
    <section class="fade-in visible">
      <h3>Статические свойства и методы</h3>
      <p>Статические свойства и методы принадлежат классу, а не его экземплярам. Они полезны для общих данных или
        утилитарных функций.</p>
      <div class="code-block">
        <pre><code class="language-javascript">
class Car {
  static maxPrice = 50000; // Статическое свойство

  static checkPrice(price) { // Статический метод
    if (price > Car.maxPrice) {
      return "Error! Price exceeds the maximum";
    }
    return "Success! Price is within acceptable limits";
  }

  #brand;
  #model;
  #price;

  constructor(params) {
    this.#brand = params.brand;
    this.#model = params.model;
    this.#price = params.price;
  }

  get price() {
    return this.#price;
  }

  set price(newPrice) {
    if (newPrice > Car.maxPrice) {
      console.log("Ошибка! Цена превышает максимальную!");
      return;
    }
    if (newPrice <= 0) {
      console.log("Ошибка! Цена должна быть больше 0!");
      return;
    }
    this.#price = newPrice;
  }
}

console.log(Car.checkPrice(36000)); // Success! Price is within acceptable limits
console.log(Car.checkPrice(60000)); // Error! Price exceeds the maximum

const car = new Car({ brand: "Nissan", model: "Murano", price: 31700 });
car.price = 45000; // Успешно
console.log(car.price); // 45000
car.price = 55000; // Ошибка! Цена превышает максимальную!
                </code></pre>
        <button class="run-code" data-example="static-props-methods">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <!-- Раздел 7: Наследование классов -->
    <section class="fade-in visible">
      <h3>Наследование классов</h3>
      <p>Наследование позволяет создавать дочерние классы, которые наследуют свойства и методы родительского
        класса, используя <code>extends</code> и <code>super</code>.</p>
      <div class="code-block">
        <pre><code class="language-javascript">
class User {
  #email;

  constructor(email) {
    this.#email = email;
  }

  get email() {
    return this.#email;
  }

  set email(newEmail) {
    this.#email = newEmail;
  }
}

class Admin extends User {
  static role = {
    BASIC: "basic",
    SUPERUSER: "superuser"
  };

  blacklistedEmails = [];

  constructor(params) {
    super(params.email);
    this.access = params.access;
  }

  blacklist(email) {
    if (email.includes('@')) {
      this.blacklistedEmails.push(email);
      console.log(`Добавлен в черный список: ${email}`);
    } else {
      console.log("Ошибка! Email должен содержать символ @");
    }
  }

  isBlacklisted(email) {
    return this.blacklistedEmails.includes(email);
  }
}

const mango = new Admin({
  email: "mango@mail.com",
  access: Admin.role.SUPERUSER,
});

mango.blacklist("poly@mail.com");
console.log(mango.isBlacklisted("poly@mail.com")); // true
console.log(mango.isBlacklisted("mango@mail.com")); // false
console.log(mango.email); // mango@mail.com
                </code></pre>
        <button class="run-code" data-example="inheritance">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <!-- Раздел 8: Контекст this -->
    <section class="fade-in visible">
      <h3>Контекст <code>this</code></h3>
      <p>Ключевое слово <code>this</code> ссылается на объект, в контексте которого выполняется функция. Его
        значение зависит от способа вызова функции.</p>
      <div class="code-block">
        <pre><code class="language-javascript">
const pizzaPalace = {
  pizzas: ["Supercheese", "Smoked", "Four meats"],
  checkPizza(pizzaName) {
    return this.pizzas.includes(pizzaName); // Используем this
  },
  order(pizzaName) {
    const isPizzaAvailable = this.checkPizza(pizzaName); // Используем this
    if (!isPizzaAvailable) {
      return `Sorry, there is no pizza named «${pizzaName}»`;
    }
    return `Order accepted, preparing «${pizzaName}» pizza`;
  },
};

console.log(pizzaPalace.order("Smoked")); // Order accepted, preparing «Smoked» pizza
console.log(pizzaPalace.order("Big Mike")); // Sorry, there is no pizza named «Big Mike»
                </code></pre>
        <button class="run-code" data-example="context-this">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <!-- Раздел 9: Прототипы -->
    <section class="fade-in visible">
      <h3>Прототипы</h3>
      <p>Прототипы позволяют объектам наследовать свойства и методы через цепочку прототипов, используя
        <code>Object.create</code>.
      </p>
      <div class="code-block">
        <pre><code class="language-javascript">
const ancestor = {
  name: "Paul",
  age: 83,
  surname: "Dawson",
  heritage: "Irish",
};

const parent = Object.create(ancestor);
parent.name = "Stacey";
parent.surname = "Moore";
parent.age = 54;

const child = Object.create(parent);
child.name = "Jason";
child.age = 27;

console.log(child.name); // Jason
console.log(child.surname); // Moore (из parent)
console.log(child.heritage); // Irish (из ancestor)
console.log(parent.isPrototypeOf(child)); // true
                </code></pre>
        <button class="run-code" data-example="prototypes">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <!-- Раздел 10: ООП: Основы -->
    <section class="fade-in visible">
      <h3>ООП: Основы</h3>
      <p>Объектно-ориентированное программирование (ООП) организует код в виде объектов, которые объединяют данные
        и методы.</p>
      <div class="code-block">
        <pre><code class="language-javascript">
class Car {
  constructor(color) {
    this.color = color;
    this.speed = 0;
    this.fuel = 100;
  }

  accelerate() {
    this.speed += 10;
    this.fuel -= 5;
    console.log(`Скорость: ${this.speed} км/ч, топливо: ${this.fuel}%`);
  }

  brake() {
    this.speed = Math.max(0, this.speed - 10);
    console.log(`Скорость: ${this.speed} км/ч`);
  }

  refuel(amount) {
    this.fuel = Math.min(100, this.fuel + amount);
    console.log(`Топливо: ${this.fuel}%`);
  }
}

const car = new Car("green");
car.accelerate(); // Скорость: 10 км/ч, топливо: 95%
car.brake(); // Скорость: 0 км/ч
car.refuel(10); // Топливо: 100%
                </code></pre>
        <button class="run-code" data-example="oop-basics">Запустить пример</button>
        <button class="copy-code">Скопировать</button>
        <button class="toggle-code">Скрыть код</button>
        <div class="output"></div>
      </div>
    </section>

    <div class="navigation-buttons">
      <a href="objects.html" class="button">← Объекты</a>
      <a href="exercises.html" class="button">Упражнения →</a>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>© 2025 JavaScript: Полное руководство для изучения</p>
    </div>
  </footer>

  <button id="scroll-top" style="display: none;">↑</button>

  <script src="../main.js" defer></script>
  <script src="../js/06_oop_classes.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      Prism.highlightAll();
    });
  </script>
</body>

</html>